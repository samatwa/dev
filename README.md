# DevOps Final Project: AWS Cloud Infrastructure & GitOps

–¶–µ–π –ø—Ä–æ—î–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î —Å–æ–±–æ—é –ø–æ–≤–Ω–∏–π —Ü–∏–∫–ª —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è —Ö–º–∞—Ä–Ω–æ—ó —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –≤ AWS –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é **Terraform** —Ç–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é GitOps-–ø—Ä–æ—Ü–µ—Å—ñ–≤ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º **Argo CD**, **Jenkins** —Ç–∞ —Å—Ç–µ–∫—É –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É (**Prometheus** & **Grafana**).

## üèó –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

–ü—Ä–æ—î–∫—Ç —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –∫–ª—é—á–æ–≤–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤:
- **VPC**: –ú–µ—Ä–µ–∂–µ–≤–∞ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑ –ø—É–±–ª—ñ—á–Ω–∏–º–∏ —Ç–∞ –ø—Ä–∏–≤–∞—Ç–Ω–∏–º–∏ –ø—ñ–¥–º–µ—Ä–µ–∂–∞–º–∏.
- **EKS**: Managed Kubernetes –∫–ª–∞—Å—Ç–µ—Ä –¥–ª—è –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤—ñ—Å—ñ–≤.
- **RDS (Aurora/PostgreSQL)**: –ö–µ—Ä–æ–≤–∞–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö.
- **ECR**: –†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –¥–ª—è Docker-–æ–±—Ä–∞–∑—ñ–≤.
- **Jenkins**: CI/CD —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó –∑–±—ñ—Ä–∫–∏.
- **Argo CD**: GitOps –æ–ø–µ—Ä–∞—Ç–æ—Ä –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—é –¥–æ–¥–∞—Ç–∫—ñ–≤.
- **Prometheus & Grafana**: –ü–æ–≤–Ω–∏–π —Å—Ç–µ–∫ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Ç–∞ –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó –º–µ—Ç—Ä–∏–∫.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

```text
Project/
‚îÇ
‚îú‚îÄ‚îÄ main.tf               # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –º–æ–¥—É–ª—ñ–≤
‚îú‚îÄ‚îÄ backend.tf            # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–µ–∫–µ–Ω–¥—É –¥–ª—è —Å—Ç–µ–π—Ç—ñ–≤ (S3 + DynamoDB)
‚îú‚îÄ‚îÄ outputs.tf            # –ó–∞–≥–∞–ª—å–Ω—ñ –≤–∏–≤–æ–¥–∏ —Ä–µ—Å—É—Ä—Å—ñ–≤ —Ç–∞ –∫–æ–º–∞–Ω–¥–∏ –¥–æ—Å—Ç—É–ø—É
‚îÇ
‚îú‚îÄ‚îÄ modules/              # –ö–∞—Ç–∞–ª–æ–≥ –∑ —É—Å—ñ–º–∞ –º–æ–¥—É–ª—è–º–∏ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏
‚îÇ  ‚îú‚îÄ‚îÄ s3-backend/        # –ú–æ–¥—É–ª—å –¥–ª—è S3 —Ç–∞ DynamoDB (Terraform State)
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ s3.tf
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ dynamodb.tf
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ variables.tf
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ outputs.tf
‚îÇ  ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ vpc/               # –ú–µ—Ä–µ–∂–∞ AWS (VPC, Subnets, Routing)
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ vpc.tf
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ routes.tf
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ variables.tf
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ outputs.tf
‚îÇ  ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ ecr/               # Docker Registry –¥–ª—è –æ–±—Ä–∞–∑—ñ–≤ –¥–æ–¥–∞—Ç–∫–∞
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ ecr.tf
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ variables.tf
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ outputs.tf
‚îÇ  ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ eks/               # Kubernetes –∫–ª–∞—Å—Ç–µ—Ä —Ç–∞ EBS CSI Driver
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ eks.tf
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ aws_ebs_csi_driver.tf
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ node.tf
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ variables.tf
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ outputs.tf
‚îÇ  ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ rds/               # –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö (Aurora –∞–±–æ RDS Instance)
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ rds.tf
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ aurora.tf
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ shared.tf
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ variables.tf
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ outputs.tf
‚îÇ  ‚îÇ 
‚îÇ  ‚îú‚îÄ‚îÄ jenkins/           # –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è CI/CD (Helm)
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ jenkins.tf
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ Jenkinsfile
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ variables.tf
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ providers.tf
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ values.yaml
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ outputs.tf
‚îÇ  ‚îÇ 
‚îÇ  ‚îî‚îÄ‚îÄ argo_cd/           # GitOps —Ç–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ (Helm + App-of-Apps)
‚îÇ    ‚îú‚îÄ‚îÄ argocd.tf
‚îÇ    ‚îú‚îÄ‚îÄ variables.tf
‚îÇ    ‚îú‚îÄ‚îÄ providers.tf
‚îÇ    ‚îú‚îÄ‚îÄ values.yaml
‚îÇ    ‚îú‚îÄ‚îÄ outputs.tf
‚îÇ    ‚îî‚îÄ‚îÄ charts/          # –í–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π —á–∞—Ä—Ç –¥–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫—ñ–≤
‚îÇ      ‚îú‚îÄ‚îÄ Chart.yaml
‚îÇ      ‚îú‚îÄ‚îÄ values.yaml    # –û–ø–∏—Å Prometheus, Grafana, Django App
‚îÇ      ‚îî‚îÄ‚îÄ templates/
‚îÇ        ‚îú‚îÄ‚îÄ application.yaml
‚îÇ        ‚îú‚îÄ‚îÄ repository.yaml
‚îÇ        ‚îî‚îÄ‚îÄ prometheus-extra-rbac.yaml
‚îÇ
‚îú‚îÄ‚îÄ charts/               # Helm —á–∞—Ä—Ç–∏ –¥–æ–¥–∞—Ç–∫—ñ–≤
‚îÇ  ‚îî‚îÄ‚îÄ django-app/        # –ú–∞–Ω—ñ—Ñ–µ—Å—Ç–∏ –¥–ª—è Django –¥–æ–¥–∞—Ç–∫–∞
‚îÇ    ‚îú‚îÄ‚îÄ templates/
‚îÇ    ‚îú‚îÄ‚îÄ Chart.yaml
‚îÇ    ‚îî‚îÄ‚îÄ values.yaml
‚îÇ
‚îî‚îÄ‚îÄ Django/               # –í–∏—Ö—ñ–¥–Ω–∏–π –∫–æ–¥ –¥–æ–¥–∞—Ç–∫–∞
    ‚îú‚îÄ‚îÄ app/
    ‚îú‚îÄ‚îÄ Dockerfile
    ‚îú‚îÄ‚îÄ Jenkinsfile
    ‚îú‚îÄ‚îÄ manage.py
    ‚îú‚îÄ‚îÄ requirements.txt      # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ Python
    ‚îî‚îÄ‚îÄ docker-compose.yaml
```

## üöÄ –ï—Ç–∞–ø–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è)

### 1. –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
- –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å `terraform`, `kubectl`, `helm` —Ç–∞ `aws-cli`.
- –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ AWS (`aws configure`).
- –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç:
  ```powershell
  terraform init
  ```

### 2. –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏
–í–∏–∫–æ–Ω–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—Å—ñ—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤ –≤ AWS:
```powershell
terraform apply
```

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤
–ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è (–∑–∞–∑–≤–∏—á–∞–π 15-20 —Ö–≤), –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å –ø–æ–¥—ñ–≤ —É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö –ø—Ä–æ—Å—Ç–æ—Ä–∞—Ö —ñ–º–µ–Ω:
```powershell
kubectl get all -n jenkins
kubectl get all -n argocd
kubectl get all -n monitoring
```
![alt text](screenshots/01.png)
![alt text](screenshots/02.png)
![alt text](screenshots/03.png)

### 4. –î–æ—Å—Ç—É–ø –¥–æ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤
–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `port-forward` –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ UI (–∫–æ–º–∞–Ω–¥–∏ —Ç–∞–∫–æ–∂ –±—É–¥—É—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ñ –≤ `terraform outputs`):

| –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –¥–æ—Å—Ç—É–ø—É | URL |
| :--- | :--- | :--- |
| **Jenkins** | `kubectl port-forward svc/jenkins 8080:80 -n jenkins` | http://localhost:8080 |
| **Argo CD** | `kubectl port-forward svc/argo-cd-argocd-server 8081:443 -n argocd` | https://localhost:8081 |
| **Grafana** | `kubectl port-forward svc/grafana 3000:80 -n monitoring` | http://localhost:3000 |
| **Prometheus**| `kubectl port-forward svc/prometheus-server 9090:80 -n monitoring` | http://localhost:9090 |

![alt text](screenshots/04.png)
![alt text](screenshots/05.png)



> **Credentials**:
> - **Argo CD**: `admin` / (–ø–∞—Ä–æ–ª—å –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤ —Å–µ–∫—Ä–µ—Ç–∞—Ö)
> - **Grafana**: `admin` / `admin123`

## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
–°—Ç–µ–∫ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –≤–∂–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –¥–ª—è –∑–±–æ—Ä—É –º–µ—Ç—Ä–∏–∫ –∑ –≤—É–∑–ª—ñ–≤ (Node Exporter) —Ç–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ (cAdvisor). –í Grafana –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–¥–∞–Ω–æ Prometheus —è–∫ Data Source.

---
*–í–∏–∫–æ–Ω–∞–≤: [–í–∞—à–µ –Ü–º'—è]*
  parameters = {
    max_connections = "200"
  }
}
```

### –û–ø–∏—Å –∑–º—ñ–Ω–Ω–∏—Ö

| –ó–º—ñ–Ω–Ω–∞ | –û–ø–∏—Å | –¢–∏–ø | –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º |
| :--- | :--- | :--- | :--- |
| `name` | –ù–∞–∑–≤–∞ —Ä–µ—Å—É—Ä—Å—É (–±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∞ —è–∫ –ø—Ä–µ—Ñ—ñ–∫—Å –¥–ª—è SG, PG, Subnet Group) | `string` | - |
| `use_aurora` | –í–∏–±—ñ—Ä —Ç–∏–ø—É –ë–î: `true` ‚Äî Aurora Cluster, `false` ‚Äî RDS Instance | `bool` | `false` |
| `engine` | –¢–∏–ø –ë–î (–¥–≤–∏–≥—É–Ω) –¥–ª—è –∑–≤–∏—á–∞–π–Ω–æ–≥–æ RDS (postgres, mysql, etc.) | `string` | `"postgres"` |
| `engine_cluster` | –¢–∏–ø –ë–î –¥–ª—è Aurora (aurora-postgresql, aurora-mysql) | `string` | `"aurora-postgresql"` |
| `engine_version` | –í–µ—Ä—Å—ñ—è –¥–≤–∏–≥—É–Ω–∞ –¥–ª—è RDS | `string` | `"14.7"` |
| `engine_version_cluster` | –í–µ—Ä—Å—ñ—è –¥–≤–∏–≥—É–Ω–∞ –¥–ª—è Aurora | `string` | `"15.3"` |
| `instance_class` | –ö–ª–∞—Å –ø–æ—Ç—É–∂–Ω–æ—Å—Ç—ñ —ñ–Ω—Å—Ç–∞–Ω—Å—É | `string` | `"db.t3.micro"` |
| `allocated_storage` | –û–±—Å—è–≥ –¥–∏—Å–∫–∞ –≤ –ì–ë (—Ç—ñ–ª—å–∫–∏ –¥–ª—è RDS) | `number` | `20` |
| `db_name` | –ù–∞–∑–≤–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ | `string` | - |
| `username` | –õ–æ–≥—ñ–Ω –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ | `string` | - |
| `password` | –ü–∞—Ä–æ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (Sensitive) | `string` | - |
| `vpc_id` | ID VPC –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è Security Group | `string` | - |
| `subnet_private_ids` | –°–ø–∏—Å–æ–∫ ID –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö –ø—ñ–¥–º–µ—Ä–µ–∂ –¥–ª—è Subnet Group | `list(string)` | - |
| `subnet_public_ids` | –°–ø–∏—Å–æ–∫ ID –ø—É–±–ª—ñ—á–Ω–∏—Ö –ø—ñ–¥–º–µ—Ä–µ–∂ (—è–∫—â–æ `publicly_accessible = true`) | `list(string)` | - |
| `publicly_accessible` | –ß–∏ –¥–æ–∑–≤–æ–ª—è—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –ë–î –∑ –ø—É–±–ª—á–Ω–∏—Ö –º–µ—Ä–µ–∂ | `bool` | `false` |
| `multi_az` | –†–µ–∂–∏–º –≤–∏—Å–æ–∫–æ—ó –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ (Multi-AZ) | `bool` | `false` |
| `parameters` | –ú–∞–ø–∞ –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –¥–ª—è Parameter Group | `map(string)` | `{}` |

### –Ø–∫ –∑–º—ñ–Ω–∏—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é

1.  **–¢–∏–ø –±–∞–∑–∏ –¥–∞–Ω–∏—Ö**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `use_aurora = true` –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–∞ Aurora (–∫—Ä–∞—â–µ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –≤–∏—Å–æ–∫–∏—Ö –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å) –∞–±–æ `use_aurora = false` –¥–ª—è –¥–µ—à–µ–≤—à–∏—Ö —ñ–Ω—Å—Ç–∞–Ω—Å—ñ–≤.
2.  **–î–≤–∏–≥—É–Ω (Engine)**: –ó–º—ñ–Ω—ñ—Ç—å `engine` (–¥–ª—è RDS) –∞–±–æ `engine_cluster` (–¥–ª—è Aurora). –¢–∞–∫–æ–∂ –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –æ–Ω–æ–≤–∏—Ç–∏ `parameter_group_family_rds` –∞–±–æ `parameter_group_family_aurora` –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –≤–µ—Ä—Å—ñ—ó.
3.  **–ö–ª–∞—Å —ñ–Ω—Å—Ç–∞–Ω—Å—É**: –ü–∞—Ä–∞–º–µ—Ç—Ä `instance_class` –¥–æ–∑–≤–æ–ª—è—î –º–∞—Å—à—Ç–∞–±—É–≤–∞—Ç–∏ —Ä–µ—Å—É—Ä—Å–∏ (CPU/RAM).
4.  **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –ë–î**: –ú–æ–¥—É–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î `Parameter Group`. –í–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ —á–µ—Ä–µ–∑ –º–∞–ø—É `parameters`, —ñ –≤–æ–Ω–∏ –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ –¥–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö (`max_connections`, `log_statement`, `work_mem`).
